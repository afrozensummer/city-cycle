<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>City Cycle</title>
    <script src="libs/jquery.min.js" charset="utf-8"></script>
    <script src="libs/d3/d3.min.js" charset="utf-8"></script>
    <script src="libs/jquery.stellar.min.js" charset="utf-8"></script>
    <script src="libs/jquery.easing.1.3.js" charset="utf-8"></script>
    <script type="text/javascript" src="libs/waypoints.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/home.css">
    <link href='http://fonts.googleapis.com/css?family=Raleway|Poiret+One' rel='stylesheet' type='text/css'>
</head>
<body>
    
    
    <div id = "intro" data-slide="0">
        <div class = "intro-text">
            <div id = "preintro">CS171 PROJECT:</div>
            <div id = "byline">Mirhee Kim, Emily Lovett, Michelle Danoff</div>
            
            <div id = "introtitle">Citi Cycle</div>
            
        </div>
        <img id = "cutebike" src="/img/cutebike.png" alt="">
        <div class="dark-cover"></div>
        <div id = "launch">
            <button><a href="vis.html">Launch Visualization</a></button>
            <button><div id = "story"><a href="#slide1">Read Our Story</a></div></button>
        </div>
        
    </div>      

    <ul class="navigation">
        <a href="">Intro</a>
        <li data-slide="1">Why CitiBike?</li>
        <li data-slide="2">What We Found</li>
    </ul>
    <div class="slide" id="slide1" data-slide="1" data-stellar-background-ratio="0.5">    

        <div class = "header" data-slide>
            Why CitiBike?
        </div>      
        <div class = "text">
            As passionate environmentalists and avid bikers, the three of us, Mirhee Kim, Emily Lovett, and Michelle Danoff, set out to make a visualization to celebrate the success of the CitiBike bike share in New York City! Bike share programs have exploded recently in each of the cities that we grew up in, and the three of us have been lucky to witness the cultural impacts of increased biking including a rise in environmental consciousness, biker safety, and biker communities. We hope our project can be both enjoyed by bike users and provide helpful insights to CitiBike and other bike share companies. 

        </br/>
        </br/>

            To launch our visualization, simply scroll up to the top of the page and press the 'Launch Visualization' button. Select a day, scroll through the timeline, or press play to witness CityBike users in action! Bikers ride in a straight line projection to their ending station. By default the map shows each user as a grey dot. You can also select categorization filters to color bikers by gender (females are pink, males are blue) or by subscription level (subscribers are yellow and one time customers are blue). 
            The two bar charts to the right of the map show how bike usage today compares to the other seven days you can view. The top bar chart tracks the number of bikers who departed during the current hour on each of the days, while the bottom bar chart shows the total number of bikers who have departed by the current. When you select the 'gender' or 'subscription' options, both bar charts will break down the data by the catagory you selected, with colors corresponding to the bikers on the map. While the bar charts help compare the current day to others, the area chart above the timeline displays the total number of bikes departing at each minute over the course of the selected day. The stations on the map are interactive. You can select up to three and see their departures or arrivals per hour in the bottom line graph. 

            Feel free to drag the bike along the timeline to jump to a particular moment you'd like to see or switch days. To learn more about our motivation behind this project and why we selected these particular days, please go to 'Read Our Story' from our homepage!

        </br/>
        </br/>    
            Our visualization displays the movement of CitiBike users in New York city between June 29 and July 5 in 2014. We decided to include a consecutive week of bike information, perticularly a week that included a holiday. Our visualization includes 4 weekdays, 2 weekends, and one federal holiday. As you click through the days, notice how commuting patterns differ based on the type of day (for example, there is a spike in usage during normal work commuting times on non-holiday weekdays). Look at July 4 to see interesting biker behavior based on the holiday, and notice movement of bikes toward the waterfront at night before the fireworks. For more information on the specific patterns we found, look below!
         </br/>
         </br/>    

            While CitiBike and other similar bike share programs have exploded in popularity in the past few years, many of them also face logistical nightmares when it comes to running their companies on a day to day basis. Many bike share companies, including CitiBike, physically transport bikes between stations since many users use bikes for one way trips. Unfortunately, bikes often get backed up at certain popular stations, leaving few bikes for users at more remote stations and preventing customers from using bikes unless CitiBike physically moves those bikes back to their original locations. CitiBike has historically struggled to figure out patterns of where bikers are moving and why in order to best plan for this movement. We hope our visualization can be used by CitiBike to better understand these patterns.


            
        </div> 
        <div class = "video">
            <iframe width="73%" height="400" src="https://www.youtube.com/embed/JlpVh8tfLZI" frameborder="0" allowfullscreen></iframe>
        </div> 
                  
        <a class="button" data-slide="2" title=""></a>   
        <span class="slideno">Citibike</span>
    </div><!--End Slide 1-->  
    
    <div class="slide" id="slide2" data-slide="2" data-stellar-background-ratio="0.5">                        
        <div class = "header" data-slide>
           What We Found
        </div>   
        <div class = "text" data-slide = "3" data-stellar-background-ratio="0.8">
            One of the most immediately obvious patterns visible is how bike usage differs based on the day of the week, and how usage patterns change on holidays. Firstly, we noticed that there are two distinct rush hour peaks in the morning and early evening on non-holiday weekdays, such as June 30 and July 1. We anticipated these spikes, since we assumed many users use CitiBikes to commute to and from work. However, on Weekends, such as June 29 and July 5, we see generally high bike usage in the afternoon, presumably people using bikes for leisure activities, but no commuting peaks like we see on weekdays. 

            The following two images show the differences between commuter traffic on weekdays:

            <div align="center">
            <input type="image" src="img/weekday_usage.png" name="image" width="45%" height="130%", horizontal-align="middle"/>
            </div> 

            Versus the following traffic on weekends:


            <div align="center">
            <input type="image" src="img/weekend_usage.png" name="image" width="45%" height="130%", horizontal-align="middle"/>
            </div> 


            </br/>
            </br/>  


            Additionally, we found that bike usage is far different on holidays. We see an interesting pattern with bike traffic on July 4 which shows bikers biking to the waterfront to watch the fireworks. Bike traffic before the fireworks (in the evening) is noticeably toward the waterfront, and we see a sudden movement of bikes away from the waterfront as soon as the fireworks end, around 10:30 p.m. Unsurprisingly, bike usage is also far lower on holidays since there are less work commuters. 
            
            </br/>
            </br/> 

            There was also an increase in non-subscription usage on Saturday. While this information might not be fascinating to the average individual, it is crucially important for bike share companies to predict how many users they will have as they decide how many bikes need to be actively available at any moment in time, especially if this availability requires moving bikes from place to place. Our bar charts illustrate the trend that one time customers (non-subscription users) constitute a very small percentage of riders on weekdays and holidays, but about a third of total users on Saturday. 
 
            </br/>
            </br/> 

            <div align="center">
            <input type="image" src="img/subscription_usage.png" name="image" width="50%" height="50%", horizontal-align="middle"/>
            </div> 


            </br/>
            </br/> 

            Finally, we found intriguing differences in bike usage between male and female users. On the average workday, male riders outnumber female riders about three to one, according to the bar charts. However, on weekends, male riders only outnumber female riders 2:1. This indicates that perhaps females are proportionately more likely than males to use bikes for recreational use as opposed to transportation to work. This information could also be useful for anyone starting a campaign for more eco-friendly transportation. Targeting females with such a campaign could have a huge impact and increase female bike commuting to the same level as male bike commuting to work. 

            </br/>
            </br/> 

            <div align="center">
            <input align="center" type="image" src="img/gender_usage.png" name="image" width="50%" height="50%"/>
            </div> 



        </div> 
    </div>

<!--     <div class = "container">
        
    </div> -->

    <script>
        $(document).ready(function(){
    $('#intro').css('min-height', $(window).height());
    $('#intro .dark-cover').height($('#intro').height());
    $('#intro .intro-text').css('top', $('#intro').height()/3.5 - $('#intro .intro-text').height()/2);
    $('#intro .dark-cover').delay(1250).animate({'opacity': 0.8}, 2000);
    $('#intro .intro-text').animate({'opacity': 1}, 3000)
    $('#intro #launch').delay(1500).animate({'left': $('#intro').width()/2 - 250}, 7000)
    $('#intro #cutebike').delay(1000).animate({'left': $('#intro').width() - 150}, 10000).animate({'opacity': 0}, 0)
    // $('#intro #launch').css('top', $('#intro').height()/3.5 + 1.5*$('#intro .intro-text').height())
    // $('.arrow').fadeIn(4000).click(function() {
    //     $('html, body').animate({
    //         scrollTop: $("#intro").height()
    //     }, 1000);
    // });

    jQuery(document).ready(function ($) {
 
 
        //initialise Stellar.js
        $(window).stellar();
     
        //Cache some variables
        var links = $('.navigation').find('li');
        slide = $('.slide');
        button = $('.button');
        mywindow = $(window);
        htmlbody = $('html,body');
     
     
        //Setup waypoints plugin
        slide.waypoint(function (event, direction) {
     
            //cache the variable of the data-slide attribute associated with each slide
            dataslide = $(this).attr('data-slide');
     
            //If the user scrolls up change the navigation link that has the same data-slide attribute as the slide to active and 
            //remove the active class from the previous navigation link 
            if (direction === 'down') {
                $('.navigation li[data-slide="' + dataslide + '"]').addClass('active').prev().removeClass('active');
            }
            // else If the user scrolls down change the navigation link that has the same data-slide attribute as the slide to active and 
            //remove the active class from the next navigation link 
            else {
                $('.navigation li[data-slide="' + dataslide + '"]').addClass('active').next().removeClass('active');
            }
     
        });
     
        //waypoints doesnt detect the first slide when user scrolls back up to the top so we add this little bit of code, that removes the class 
        //from navigation link slide 2 and adds it to navigation link slide 1. 
        mywindow.scroll(function () {
            if (mywindow.scrollTop() == 0) {
                $('.navigation li[data-slide="1"]').addClass('active');
                $('.navigation li[data-slide="2"]').removeClass('active');
            }
        });
     
        //Create a function that will be passed a slide number and then will scroll to that slide using jquerys animate. The Jquery
        //easing plugin is also used, so we passed in the easing method of 'easeInOutQuint' which is available throught the plugin.
        function goToByScroll(dataslide) {
            htmlbody.animate({
                scrollTop: $('.slide[data-slide="' + dataslide + '"]').offset().top
            }, 2000, 'easeInOutQuint');
        }
     
     
     
        //When the user clicks on the navigation links, get the data-slide attribute value of the link and pass that variable to the goToByScroll function
        links.click(function (e) {
            e.preventDefault();
            dataslide = $(this).attr('data-slide');
            goToByScroll(dataslide);
        });
     
        //When the user clicks on the button, get the get the data-slide attribute value of the button and pass that variable to the goToByScroll function
        button.click(function (e) {
            e.preventDefault();
            dataslide = $(this).attr('data-slide');
            goToByScroll(dataslide);
     
        });
     
     
    });

});
    </script>
    
</body>
</html>
